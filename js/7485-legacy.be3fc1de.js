"use strict";(self["webpackChunkict_itmo"]=self["webpackChunkict_itmo"]||[]).push([[7485],{40561:function(t,e,n){var i=n(82109),o=n(17854),a=n(51400),r=n(19303),s=n(26244),l=n(47908),c=n(65417),d=n(86135),p=n(81194),u=p("splice"),f=o.TypeError,m=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var n,i,o,p,u,v,C=l(this),x=s(C),k=a(t,x),w=arguments.length;if(0===w?n=i=0:1===w?(n=0,i=x-k):(n=w-2,i=h(m(r(e),0),x-k)),x+n-i>g)throw f(b);for(o=c(C,i),p=0;p<i;p++)u=k+p,u in C&&d(o,p,C[u]);if(o.length=i,n<i){for(p=k;p<x-i;p++)u=p+i,v=p+n,u in C?C[v]=C[u]:delete C[v];for(p=x;p>x-i+n;p--)delete C[p-1]}else if(n>i)for(p=x-i;p>k;p--)u=p+i-1,v=p+n-1,u in C?C[v]=C[u]:delete C[v];for(p=0;p<n;p++)C[p+k]=arguments[p+2];return C.length=x-i+n,o}})},48815:function(t,e,n){n.r(e),n.d(e,{default:function(){return B}});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("div",{staticClass:"pb-2 pb-md-4 text-h6 text-md-h5"},[t._v(" Статьи ")]),t.isPreview?i("div",[i("BaseStudentsCompetition",{attrs:{"hex-array":t.form.winnersHex,title:t.form.name,subtitle:t.form.title,description:t.form.description}}),i("BaseNews",{attrs:{data:t.previewData}}),i("BaseButtonOutlined",{attrs:{text:"Назад","click-btn":!0},on:{clickBtnCallback:function(e){t.isPreview=!1}}})],1):i("div",[i("div",{staticClass:"input-bordered mb-6"},[i("v-text-field",{staticClass:"input-border-0 text-h6 input-blue font-weight-bold",attrs:{placeholder:"Название",outlined:"",dense:"",dark:"dark"===t.theme,"hide-details":""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("div",{staticClass:"input-bordered mb-6 pt-3"},[i("div",{staticClass:"input-bordered-label app-background"},[t._v(" Описание статьи "),i("span",{staticClass:"error--text"},[t._v("*")])]),i("vue-editor",{staticClass:"custom",attrs:{"editor-toolbar":t.customToolbar,placeholder:"Введите текст"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),i("div",{staticClass:"input-bordered mb-6 pt-3"},[i("div",{staticClass:"input-bordered-label app-background"},[t._v(" Победители "),i("span",{staticClass:"error--text"},[t._v("*")])]),i("v-text-field",{staticClass:"mx-6 my-2 input-light-blue",attrs:{placeholder:"Название слайдера",outlined:"",dense:"",dark:"dark"===t.theme,"hide-details":""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),i("div",{staticClass:"mx-6 pb-4 d-flex flex-wrap"},[i("v-col",{staticClass:"input-file-container",attrs:{cols:t.$vuetify.breakpoint.smAndDown?12:6},on:{dragover:function(t){t.preventDefault()},drop:function(t){t.preventDefault()}}},[i("input",{attrs:{id:"winners",type:"file",multiple:""},on:{change:function(e){t.changeContentImagesBlock(t.form.winners.concat(Array.from(e.target.files)))}}}),i("label",{staticClass:"d-flex align-center py-md-6 px-md-12 text-center",attrs:{for:"winners"},on:{drop:function(e){t.changeContentImagesBlock(t.form.winners.concat(Array.from(e.dataTransfer.files)))}}},[i("span",[i("v-img",{staticStyle:{"z-index":"0"},attrs:{width:"80",height:"80",contain:"",src:n(42012)}})],1),t._v(" Выберите изображение или перетащите файл ")])]),t.form.winners.length?i("v-col",{staticClass:"pl-6 py-0 d-flex flex-wrap align-start justify-space-between",attrs:{cols:t.$vuetify.breakpoint.smAndDown?12:6}},[i("draggable",{staticClass:"d-flex flex-wrap",attrs:{list:t.form.winners},on:{change:function(e){t.changeList(e)}}},t._l(t.form.winnersHex,(function(e,n){return i("v-col",{key:n,staticClass:"d-flex mt-2 pa-0",attrs:{cols:"12",md:"6"}},[i("div",[t._v(t._s(n+1)+".")]),i("div",{staticClass:"input-slider-img-block px-2 ml-2 d-flex align-center"},[i("v-text-field",{staticClass:"ma-0 input-border-0",attrs:{dense:"",dark:"dark"===t.theme,"hide-details":""},model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"hex.text"}}),i("v-btn",{attrs:{icon:"","x-small":"",color:"#0071B2"},on:{click:function(e){return t.deleteContentImgBlock(n)}}},[i("v-icon",{attrs:{small:""}},[t._v(" mdi-close-circle-outline ")])],1)],1)])})),1)],1):t._e()],1)],1),i("DraggableInputs",{attrs:{blocks:t.form.blocks},on:{changeDialogContent:t.changeDialogContent,changeDialog:t.changeDialog,updateProp:t.updateProp,beforeCropInsert:t.beforeCropInsert}}),i("div",{staticClass:"px-0 subtitle-color",staticStyle:{cursor:"pointer",width:"fit-content"},on:{click:t.addBlock}},[i("v-icon",{attrs:{color:"#0071B2"}},[t._v(" mdi-plus-circle-outline ")]),t._v(" Добавить поле ")],1),i("v-row",{staticClass:"pt-4"},[i("v-col",{attrs:{cols:"12",md:"3"}},[i("div",{staticClass:"pl-4 subtitle-color text-body-2",staticStyle:{opacity:"0.7"}},[t._v(" Дата начала мероприятия"),i("span",{staticClass:"error--text"},[t._v("*")])]),i("v-text-field",{staticClass:"search-input",attrs:{type:"date",outlined:"",dense:"",dark:"dark"===t.theme,color:"dark"===t.theme?"#00A1FF":"#005A8E","hide-details":""},model:{value:t.form.dateStart,callback:function(e){t.$set(t.form,"dateStart",e)},expression:"form.dateStart"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("div",{staticClass:"pl-4 subtitle-color text-body-2",staticStyle:{opacity:"0.7"}},[t._v(" Дата конца мероприятия ")]),i("v-text-field",{staticClass:"search-input",attrs:{type:"date",outlined:"",dense:"",dark:"dark"===t.theme,color:"dark"===t.theme?"#00A1FF":"#005A8E","hide-details":""},model:{value:t.form.dateEnd,callback:function(e){t.$set(t.form,"dateEnd",e)},expression:"form.dateEnd"}})],1)],1),i("div",{staticClass:"d-flex pt-6"},[i("BaseButton",{attrs:{text:"Опубликовать","click-btn":!0},on:{clickBtnCallback:t.publish}}),i("BaseButtonOutlined",{staticClass:"ml-4",attrs:{text:"Предпросмотр","click-btn":!0},on:{clickBtnCallback:t.preview}})],1)],1),i("DialogPreviewComponent",{attrs:{dialog:t.dialog,"dialog-content":t.dialogContent},on:{changeDialog:t.changeDialog,beforeCropInsert:t.beforeCropInsert}}),i("DialogCroppieComponent",{attrs:{dialog:t.dialogCroppie,title:t.dialogCroppieOptions.title,size:t.dialogCroppieOptions.size,"data-img":t.dialogCroppieDataImg,"enable-resize":t.dialogCroppieOptions.enableResize},on:{changeDialog:t.changeDialogCroppie,changeCroppie:t.changeCroppie}})],1)},o=[],a=n(4367),r=(n(41539),n(78783),n(33948),n(38862),n(69826),n(54747),n(74916),n(4723),n(69600),n(47042),n(23123),n(68309),n(40561),n(20629)),s=n(2739),l=n(9980),c=n.n(l),d=n(22100),p={name:"CompetitionComponent",components:{VueEditor:s.bR,draggable:c(),DialogCroppieComponent:function(){return Promise.all([n.e(2681),n.e(3548),n.e(2624)]).then(n.bind(n,48404))},BaseStudentsCompetition:function(){return n.e(4921).then(n.bind(n,14921))},DialogPreviewComponent:function(){return Promise.all([n.e(2681),n.e(3548),n.e(1844)]).then(n.bind(n,71288))},BaseNews:function(){return n.e(4828).then(n.bind(n,64828))},DraggableInputs:function(){return Promise.all([n.e(2681),n.e(6999),n.e(4634),n.e(8032)]).then(n.bind(n,94634))},BaseButtonOutlined:function(){return n.e(2149).then(n.bind(n,2149))},BaseButton:function(){return n.e(1992).then(n.bind(n,1992))}},mixins:[d.Z],data:function(){return{customToolbar:[{align:""},{align:"center"},{align:"justify"},{list:"ordered"},{list:"bullet"},"bold","italic","underline","link","clean"],dialog:!1,dialogContent:{},isPreview:!1,previewData:{},form:{name:"",description:"",dateStart:null,dateEnd:null,title:"",winners:[],winnersHex:[],blocks:[{id:0,type:-1,content:null}]}}},computed:(0,a.Z)({},(0,r.rn)("app",["theme"])),methods:{changeDialog:function(t){this.dialog=t},changeDialogContent:function(t){this.form=JSON.parse(JSON.stringify(this.form)),this.dialogContent=this.form.blocks.find((function(e){return e.id===t.id}))},addBlock:function(){this.form.blocks.push({id:this.count,type:-1,content:null}),this.count++},publish:function(){console.log(this.form)},preview:function(){this.previewData=this.form,this.isPreview=!0},updateProp:function(t){this.form.blocks=t},changeContentImagesBlock:function(t){var e=this;this.form.winnersHex=[],t.forEach((function(t){if(t.type.match("image.*")){var n=new FileReader;n.onload=function(n){e.form.winnersHex.push({img:n.target.result,text:t.name.split(".").slice(0,-1).join(".")})},n.readAsDataURL(t)}})),this.form.winners=t},deleteContentImgBlock:function(t){this.form.winners.splice(t,1),this.form.winnersHex.splice(t,1)},changeList:function(t){var e=this.form.winnersHex.splice(t.moved.oldIndex,1)[0];this.form.winnersHex.splice(t.moved.newIndex,0,e)}}},u=p,f=n(1001),m=n(43453),h=n.n(m),g=n(680),b=n(82102),v=n(99846),C=n(96428),x=n(97047),k=n(62877),w=n(55978),y=(0,f.Z)(u,i,o,!1,null,"38324a84",null),B=y.exports;h()(y,{VBtn:g.Z,VCol:b.Z,VContainer:v.Z,VIcon:C.Z,VImg:x.Z,VRow:k.Z,VTextField:w.Z})}}]);
//# sourceMappingURL=7485-legacy.be3fc1de.js.map